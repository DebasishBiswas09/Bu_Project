{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\GNIT\\\\Eighth Semester\\\\Capgemini\\\\BU\\\\Code - Copy\\\\src\\\\components1\\\\AddTrain.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\nimport userservice from \"../service/userservice\";\nimport trainservice from \"../service/trainservice\";\nimport AuthService from \"../services/auth.service\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nlet p = localStorage.getItem(\"username\");\n\nconst AddTrain = () => {\n  _s();\n\n  const [user, setFaculty] = useState([]);\n  const [train_no, setTrainNo] = useState([]);\n  const [train_name, setTrainName] = useState(\"\");\n  const [start_from, setStartFrom] = useState(\"\");\n  const [departure_time, setDepartureTime] = useState(\"\");\n  const [to_destination, setToDestination] = useState(\"\");\n  const [arrival_time, setArrivalTime] = useState(\"\");\n  const [price, setPrice] = useState(\"\");\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n\n  const init = () => {\n    AuthService.getUser(p).then(response => {\n      console.log(\"Printing faculty data\", response.data);\n      setFaculty(response.data);\n    }).catch(error => {\n      console.log(\"Something went wrong\", error);\n    });\n  };\n\n  useEffect(() => {\n    init();\n  }, []);\n\n  const saveTrain = e => {\n    e.preventDefault();\n    const train = {\n      train_no,\n      train_name,\n      start_from,\n      departure_time,\n      to_destination,\n      arrival_time,\n      price,\n      id\n    };\n\n    if (id) {\n      //update\n      userservice.update(train).then(response => {\n        console.log(\"Train details updated successfully\", response.data);\n        navigate(\"/trainlist1\");\n      }).catch(error => {\n        console.log(\"Something went wrong\", error);\n      });\n    } else {\n      // create\n      userservice.createTrain(train).then(response => {\n        console.log(\"Train details added successfully\", response.data);\n        navigate(\"/trainlist1\");\n      }).catch(error => {\n        console.log(\"Something went wrong\", error);\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (train_no) {\n      trainservice.get(train_no).then(train => {\n        setTrainNo(train.data.train_no);\n        setTrainName(train.data.train_name);\n        setStartFrom(train.data.start_from);\n        setDepartureTime(train.data.departure_time);\n        setToDestination(train.data.to_destination);\n        setArrivalTime(train.data.arrival_time);\n        setPrice(train.data.price);\n      }).catch(error => {\n        console.log(\"Something went wrong\", error);\n      });\n    }\n  }, []);\n\n  function SubmitBtn() {\n    if (train_no && train_name && start_from && departure_time && to_destination && arrival_time && price) return /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: o => saveTrain(o),\n      className: \"btn btn-success\",\n      children: \"Save\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }, this);else return /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"btn btn-success\",\n      disabled: true,\n      children: \"Save\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        color: \"white\",\n        fontWeight: \"bolder\",\n        fontSize: \"40px\"\n      },\n      children: \"Add and Update Train Details\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control col-4 is-invalid\",\n          id: \"train_no\",\n          value: train_no,\n          onChange: e => setTrainNo(e.target.value),\n          placeholder: \"Enter Train No\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control col-4 is-invalid\",\n          id: \"train_name\",\n          value: train_name,\n          onChange: e => setTrainName(e.target.value),\n          placeholder: \"Enter Train Name\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control col-4 is-invalid\",\n          id: \"start_from\",\n          value: start_from,\n          onChange: e => setStartFrom(e.target.value),\n          placeholder: \"Enter Start from\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control col-4 is-invalid\",\n          id: \"departure_time\",\n          value: departure_time,\n          onChange: e => setDepartureTime(e.target.value),\n          placeholder: \"Enter Departure Time\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control col-4 is-invalid\",\n          id: \"to_destination\",\n          value: to_destination,\n          onChange: e => setToDestination(e.target.value),\n          placeholder: \"Enter To Destination\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control col-4 is-invalid\",\n          id: \"arrival_time\",\n          value: arrival_time,\n          onChange: e => setArrivalTime(e.target.value),\n          placeholder: \"Enter Arrival Time\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          className: \"form-control col-4 is-invalid\",\n          id: \"price\",\n          value: price,\n          onChange: e => setPrice(e.target.value),\n          placeholder: \"Enter Price\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(SubmitBtn, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/TrainDetails\",\n      children: \"Back to List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AddTrain, \"FNml9akQf9YWEgdsAXRtvCEjoLk=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = AddTrain;\nexport default AddTrain;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddTrain\");","map":{"version":3,"sources":["D:/GNIT/Eighth Semester/Capgemini/BU/Code - Copy/src/components1/AddTrain.js"],"names":["React","useState","useEffect","Link","useNavigate","useParams","userservice","trainservice","AuthService","p","localStorage","getItem","AddTrain","user","setFaculty","train_no","setTrainNo","train_name","setTrainName","start_from","setStartFrom","departure_time","setDepartureTime","to_destination","setToDestination","arrival_time","setArrivalTime","price","setPrice","navigate","id","init","getUser","then","response","console","log","data","catch","error","saveTrain","e","preventDefault","train","update","createTrain","get","SubmitBtn","o","color","fontWeight","fontSize","target","value"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport userservice from \"../service/userservice\";\r\nimport trainservice from \"../service/trainservice\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nlet p = localStorage.getItem(\"username\");\r\nconst AddTrain = () => {\r\n  const [user, setFaculty] = useState([]);\r\n  const [train_no, setTrainNo] = useState([]);\r\n  const [train_name, setTrainName] = useState(\"\");\r\n  const [start_from, setStartFrom] = useState(\"\");\r\n  const [departure_time, setDepartureTime] = useState(\"\");\r\n  const [to_destination, setToDestination] = useState(\"\");\r\n  const [arrival_time, setArrivalTime] = useState(\"\");\r\n  const [price, setPrice] = useState(\"\");\r\n\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n\r\n  const init = () => {\r\n    AuthService.getUser(p)\r\n      .then((response) => {\r\n        console.log(\"Printing faculty data\", response.data);\r\n        setFaculty(response.data);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Something went wrong\", error);\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    init();\r\n  }, []);\r\n\r\n  const saveTrain = (e) => {\r\n    e.preventDefault();\r\n\r\n    const train = {\r\n      train_no,\r\n      train_name,\r\n      start_from,\r\n      departure_time,\r\n      to_destination,\r\n      arrival_time,\r\n      price,\r\n      id,\r\n    };\r\n\r\n    if (id) {\r\n      //update\r\n      userservice\r\n        .update(train)\r\n        .then((response) => {\r\n          console.log(\"Train details updated successfully\", response.data);\r\n          navigate(\"/trainlist1\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Something went wrong\", error);\r\n        });\r\n    } else {\r\n      // create\r\n      userservice\r\n        .createTrain(train)\r\n        .then((response) => {\r\n          console.log(\"Train details added successfully\", response.data);\r\n          navigate(\"/trainlist1\");\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Something went wrong\", error);\r\n        });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (train_no) {\r\n      trainservice\r\n        .get(train_no)\r\n        .then((train) => {\r\n          setTrainNo(train.data.train_no);\r\n          setTrainName(train.data.train_name);\r\n          setStartFrom(train.data.start_from);\r\n          setDepartureTime(train.data.departure_time);\r\n          setToDestination(train.data.to_destination);\r\n          setArrivalTime(train.data.arrival_time);\r\n          setPrice(train.data.price);\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"Something went wrong\", error);\r\n        });\r\n    }\r\n  }, []);\r\n  function SubmitBtn() {\r\n    if (\r\n      train_no &&\r\n      train_name &&\r\n      start_from &&\r\n      departure_time &&\r\n      to_destination &&\r\n      arrival_time &&\r\n      price\r\n    )\r\n      return (\r\n        <button onClick={(o) => saveTrain(o)} className=\"btn btn-success\">\r\n          Save\r\n        </button>\r\n      );\r\n    else\r\n      return (\r\n        <button className=\"btn btn-success\" disabled>\r\n          Save\r\n        </button>\r\n      );\r\n  }\r\n  return (\r\n    <div className=\"container\">\r\n      <h3 style={{ color: \"white\", fontWeight: \"bolder\", fontSize: \"40px\" }}>\r\n        Add and Update Train Details\r\n      </h3>\r\n      <hr />\r\n      <form>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control col-4 is-invalid\"\r\n            id=\"train_no\"\r\n            value={train_no}\r\n            onChange={(e) => setTrainNo(e.target.value)}\r\n            placeholder=\"Enter Train No\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control col-4 is-invalid\"\r\n            id=\"train_name\"\r\n            value={train_name}\r\n            onChange={(e) => setTrainName(e.target.value)}\r\n            placeholder=\"Enter Train Name\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control col-4 is-invalid\"\r\n            id=\"start_from\"\r\n            value={start_from}\r\n            onChange={(e) => setStartFrom(e.target.value)}\r\n            placeholder=\"Enter Start from\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control col-4 is-invalid\"\r\n            id=\"departure_time\"\r\n            value={departure_time}\r\n            onChange={(e) => setDepartureTime(e.target.value)}\r\n            placeholder=\"Enter Departure Time\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control col-4 is-invalid\"\r\n            id=\"to_destination\"\r\n            value={to_destination}\r\n            onChange={(e) => setToDestination(e.target.value)}\r\n            placeholder=\"Enter To Destination\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control col-4 is-invalid\"\r\n            id=\"arrival_time\"\r\n            value={arrival_time}\r\n            onChange={(e) => setArrivalTime(e.target.value)}\r\n            placeholder=\"Enter Arrival Time\"\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"number\"\r\n            className=\"form-control col-4 is-invalid\"\r\n            id=\"price\"\r\n            value={price}\r\n            onChange={(e) => setPrice(e.target.value)}\r\n            placeholder=\"Enter Price\"\r\n            required\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          {/* <button onClick={(e) => saveOrd(e)} className=\"btn btn-primary\">\r\n            Save\r\n          </button> */}\r\n          <SubmitBtn />\r\n        </div>\r\n      </form>\r\n      <hr />\r\n      <Link to=\"/TrainDetails\">Back to List</Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddTrain;\r\n"]},"metadata":{},"sourceType":"module"}